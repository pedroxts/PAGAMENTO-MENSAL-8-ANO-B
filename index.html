
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle de Pagamentos - Atualizado</title>
<style>
  body { font-family: "Segoe UI", Arial, sans-serif; margin: 30px; background-color: #f4f6f9; color: #333; }
  h1 { text-align: center; margin-bottom: 20px; }
  table { width: 100%; border-collapse: collapse; background: #fff; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  th, td { border: 1px solid #ddd; padding: 6px; text-align: center; font-size: 14px; }
  th { background-color: #0078d7; color: white; }
  select { padding: 4px; border-radius: 4px; border: 1px solid #ccc; }
  tr:nth-child(even) { background-color: #f9f9f9; }
  .total-cell { font-weight: bold; background-color: #e8f4ff; }
  .summary { margin-top: 25px; background: #fff; padding: 15px; border-radius: 6px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  .summary h2 { margin-top: 0; color: #0078d7; }
  ul { list-style-type: none; padding-left: 0; }
  li { margin-bottom: 5px; }
  .highlight { color: #0078d7; font-weight: bold; }
  .divider { border-top: 1px solid #ddd; margin: 10px 0; }
  .small-note { font-size: 13px; color: #555; margin-bottom: 10px; }
  /* ========== Layout Responsivo para Celular ========== */
@media (max-width: 768px) {

  body {
    background: #f5f7fa;
    margin: 10px;
  }

  h1 {
    font-size: 20px;
    color: #0b5cff;
    margin-bottom: 12px;
  }

  table, thead, tbody, th, td, tr {
    display: block;
    width: 100%;
  }

  thead {
    display: none;
  }

  tr {
    background: #ffffff;
    margin-bottom: 18px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    padding: 14px;
    border: 1px solid #e2e8f0;
  }

  /* Nome do aluno */
  td:first-child {
    font-weight: 700;
    font-size: 16px;
    color: #1f2937;
    border: none;
    padding-bottom: 8px;
    text-align: center;
  }

  /* Cada mês e select */
  td {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border: none;
    border-top: 1px solid #f1f5f9;
  }

  td::before {
    content: attr(data-label);
    font-weight: 600;
    color: #334155;
    flex: 1;
    text-align: left;
    padding-right: 10px;
  }

  select {
    flex: 1;
    max-width: 55%;
    padding: 8px;
    font-size: 15px;
    border-radius: 8px;
    border: 1px solid #cbd5e1;
    background: #f9fafb;
    color: #111827;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  }

  .total-cell {
    background: #e6f7ed;
    color: #065f46;
    font-weight: bold;
    text-align: right;
    border-radius: 8px;
    padding: 8px 10px;
    margin-top: 10px;
  }

  .summary {
    background: #eef4ff;
    padding: 16px;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    margin-top: 20px;
  }

  .summary h2 {
    text-align: center;
    color: #1e3a8a;
    font-size: 18px;
    margin-bottom: 10px;
  }

  .highlight {
    color: #0b5cff;
  }
}
</style>
</head>
<body>

<h1>Controle de Pagamentos - Atualizado (Março a Outubro)</h1>

<div class="small-note">Os dados da tabela foram importados da sua planilha. Use os dropdowns para ajustar manualmente; os totais e o relatório se atualizam automaticamente.</div>

<table id="paymentTable">
  <thead>
    <tr>
      <th>Aluno</th>
      <th>Março</th>
      <th>Abril</th>
      <th>Maio</th>
      <th>Junho</th>
      <th>Agosto</th>
      <th>Setembro</th>
      <th>Outubro</th>
      <th>Total (R$)</th>
    </tr>
  </thead>
  <tbody></tbody>
  <tfoot>
    <tr>
      <th colspan="8">TOTAL GERAL</th>
      <th id="grandTotal">R$ 0,00</th>
    </tr>
  </tfoot>
</table>

<div class="summary">
  <h2>Relatório de Pagamentos</h2>
  <ul id="relatorioPagamentos"></ul>
  <div class="divider"></div>
  <p><span class="highlight">Total geral arrecadado:</span> <span id="summaryTotal">R$ 0,00</span></p>
</div>

<script>
  const dados = [{"nome": "Ana Júlia Alves Soares", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "Pago Dinheiro", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Anne Beatricce de Oliveira Rodrigues", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": "Pago PIX"}, {"nome": "Carlos Eduardo Biângulo Rodrigues", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": "Pago PIX"}, {"nome": "Davi Asafe Trigueiro Silva", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "Pago Dinheiro", "Agosto": "Pago Dinheiro", "Setembro": "", "Outubro": ""}, {"nome": "Diogo Barcelos Gonçalves", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": ""}, {"nome": "Enzo Araujo dos Santos", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "", "Outubro": ""}, {"nome": "Estela Klara Martins da Silva", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago PIX", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Isabella Giovana Amaral de Oliveira", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Isabelly Giovanna de Carvalho França", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": "Pago PIX"}, {"nome": "Italo Davi Domingos Sales", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": ""}, {"nome": "João Miguel de Castro Rodrigues", "Março": "Pago PIX", "Abril": "", "Maio": "", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "João Pedro Borges Lourenço", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "Pago Dinheiro", "Agosto": "Pago Dinheiro", "Setembro": "Pago Dinheiro", "Outubro": "Pago Dinheiro"}, {"nome": "João Vitor Pereira Andrade", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Laura Coelho Maciel", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Luna Aimě de Oliveira Rodrigues", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": "Pago PIX"}, {"nome": "Maria Clara Cunha Rocha*", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago Dinheiro", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Maria Fernanda Ribeiro Costa", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Maria Luiza Lopes Bandeira Borba", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Marina Oliveira Rodrigues Souto", "Março": "Pago Dinheiro", "Abril": "", "Maio": "", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Mateus Cardoso Meireles Pessoa", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "Pago PIX", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Nathan Vinícius Sabóia de Andrade", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Nicolas Ed Crispim Melo", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "", "Outubro": ""}, {"nome": "Pedro Henrique Holanda Palmeira", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Rafaela Gonçalves da Silva", "Março": "Pago PIX", "Abril": "Pago Dinheiro", "Maio": "Pago Dinheiro", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Sophia da Silva de Brito Rocha Ramos", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Victor Barbosa de Sousa", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "", "Outubro": ""}, {"nome": "Isabele Boaventura", "Março": "Pago Dinheiro", "Abril": "Pago Dinheiro", "Maio": "Não Pago", "Junho": "", "Agosto": "", "Setembro": "", "Outubro": ""}, {"nome": "Ana Paula ", "Março": "Pago PIX", "Abril": "Pago PIX", "Maio": "Pago PIX", "Junho": "Pago PIX", "Agosto": "Pago PIX", "Setembro": "Pago PIX", "Outubro": "Pago PIX"}];
  const meses = ["Março", "Abril", "Maio", "Junho", "Agosto", "Setembro", "Outubro"];
  const valorMensal = 10;

  const tableBody = document.querySelector("#paymentTable tbody");

  function criarOption(value, selectedValue) {
    const option = document.createElement("option");
    option.value = value;
    option.textContent = value;
    if (selectedValue) {
      if (value.trim().toLowerCase() === selectedValue.trim().toLowerCase()) {
        option.selected = true;
      }
    }
    return option;
  }

  function normalizarValor(v) {
    if (!v || v.toString().trim() === "") return "Não Pago";
    const s = v.toString().trim().toLowerCase();
    if (s.includes("pix")) return "Pago PIX";
    if (s.includes("dinheiro")) return "Pago Dinheiro";
    return v.toString();
  }

  dados.forEach(aluno => {
    const tr = document.createElement("tr");
    const tdNome = document.createElement("td");
    tdNome.textContent = aluno.nome;
    tr.appendChild(tdNome);

    meses.forEach(mes => {
      const td = document.createElement("td");
      const select = document.createElement("select");

      ["Não Pago", "Pago PIX", "Pago Dinheiro"].forEach(opt => {
        const option = criarOption(opt, normalizarValor(aluno[mes]));
        select.appendChild(option);
      });

      select.addEventListener("change", atualizarTotais);
      td.appendChild(select);
      tr.appendChild(td);
    });

    const tdTotal = document.createElement("td");
    tdTotal.className = "total-cell";
    tdTotal.textContent = "R$ 0,00";
    tr.appendChild(tdTotal);

    tableBody.appendChild(tr);
  });

  function atualizarTotais() {
    let totalGeral = 0;
    const relatorio = [];

    document.querySelectorAll("#paymentTable tbody tr").forEach(tr => {
      const selects = tr.querySelectorAll("select");
      const nomeAluno = tr.querySelector("td").textContent;
      let totalAluno = 0;
      const mesesPagos = [];

      selects.forEach((sel, i) => {
        if (sel.value === "Pago PIX" || sel.value === "Pago Dinheiro") {
          totalAluno += valorMensal;
          mesesPagos.push(meses[i]);
        }
      });

      tr.querySelector(".total-cell").textContent = `R$ ${totalAluno.toFixed(2)}`;
      totalGeral += totalAluno;

      relatorio.push({ nome: nomeAluno, mesesPagos, qtd: mesesPagos.length });
    });

    document.getElementById("grandTotal").textContent = `R$ ${totalGeral.toFixed(2)}`;
    document.getElementById("summaryTotal").textContent = `R$ ${totalGeral.toFixed(2)}`;

    atualizarRelatorio(relatorio);
  }

  function atualizarRelatorio(relatorio) {
    const ul = document.getElementById("relatorioPagamentos");
    ul.innerHTML = "";

    relatorio.forEach(item => {
      const li = document.createElement("li");
      if (item.qtd === 0) {
        li.innerHTML = `<strong>${item.nome}</strong> — Nenhum pagamento registrado.`;
      } else {
        li.innerHTML = `<strong>${item.nome}</strong> — Pagou: ${item.mesesPagos.join(", ")} (${item.qtd} meses)`;
      }
      ul.appendChild(li);
    });
  }

  // Inicializa o relatório ao carregar a página
  atualizarTotais();
</script>

</body>
</html>
